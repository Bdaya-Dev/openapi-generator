{{>networking/http/auth/header}}
{{>networking/http/auth/imports}}

import 'auth.dart';


typedef HttpBearerAuthProvider = String? Function();

class HttpBearerAuth implements Authentication {
  HttpBearerAuth();

  HttpBearerAuthProvider? accessTokenProvider;

  @override
  Future<void> applyToParams(List<QueryParam> queryParams, Map<String, String> headerParams,) async {
    final provider = accessTokenProvider;
    if (provider == null) {
      return;
    }

    final accessToken = provider();
    if (accessToken != null && accessToken.isNotEmpty) {
      headerParams['Authorization'] = 'Bearer $accessToken';
    }
  }
}
